#Structure
#Potential Mimic -- scroll or enemy
scale = modifier("2",0)
player_stats = {"max_health":20,"health":20,"max_attack":5,"attack":5,"armour":2,"exp":0,"level":0,"exit":False,"status_effects":{"poision_duration":0,"weaken_duration":0,"weaken_state":True}}

def potential_mimic(player_stats,scale,encounter):
  while True:
    choice = input("You stumbled upon a small room with a menacing looking chest! What do you do?\n1 --> Open the chest\n2 --> Walk past it\n3 --> Ascend from the dungeon\n")
    if len(choice) == 1:
      if choice in '123':
        break
    print("Choose a valid option! ")
  mimic_chance = random.randint(1,2)
  if choice == "2":
    if mimic_chance == 1:
      print("You walk past the chest, and notice that is was actually a mimic! ")
    if mimic_chance == 2:
      print("You walk past the chest, and notice you lost a chance at an upgrade scroll! ")
  if choice == "3":
    print("You no longer feel in control of your body! ")
    player_stats["exit"] = True
  if choice == "1":
    if mimic_chance == 2:
      upgrade(player_stats)
    if mimic_chance == 1:
      print(f"{divider}\nA mimic takes you by surprise! It gets the first hit! ")
      mimic_stats = {"health":2*scale,"attack":1,"description":"Many greedy adventurers have been taken by surprise from this beast! Now you have to fight! "}
      first_hit = mimic_stats["attack"]
      final_first_hit = block_damage(player_stats["armour"],first_hit,encounter)
      choice = choices(mimic_stats,player_stats,encounter)
      if choice == "1":
        while player_stats["health"] > 0 and mimic_stats["health"] > 0:
          attack = random.randint(1,player_stats["attack"])
          mimic_stats["health"] -= attack
          if mimic_stats["health"] < 0:
            mimic_stats["health"] = 0
          print(f"""You have dealt {attack} damage to the mimic, It now has {mimic_stats["health"]} health! """)
          if mimic_stats["health"] > 0:
            attack = random.randint(1,mimic_stats["attack"])
            final_damage = block_damage(player_stats["armour"],attack,encounter)
          tick(player_stats)
          if player_stats["health"] < 0:
            player_stats["health"] = 0
            print("You have died to this enemy! ")
            Life = False
            print(f"""You now have {player_stats["health"]} health! \n{divider}""")
        exp(player_stats)
        upgrade(player_stats)
